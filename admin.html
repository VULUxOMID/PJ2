<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - SubjectPhoto</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Admin dashboard for SubjectPhoto photography management system.">
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“·</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'cool-white': '#f0f9ff',
                        'soft-white': '#e0f2fe',
                        'light-blue': '#f0f9ff',
                        'cool-gray': '#64748b',
                        'soft-gray': '#94a3b8',
                        'light-gray': '#e0f2fe',
                        'accent-blue': '#3b82f6',
                        'hover-blue': '#2563eb',
                    }
                }
            }
        }
    </script>
</head>
<body class="font-inter bg-blue-50 text-slate-700 min-h-screen">
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-blue-50/95 backdrop-blur-sm border-b border-blue-200">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="/" class="text-2xl font-semibold text-slate-800 hover:text-accent-blue transition-colors">
                    SubjectPhoto
                </a>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="/" class="text-cool-gray hover:text-accent-blue transition-colors font-medium">Home</a>
                    <a href="/gallery.html" class="text-cool-gray hover:text-accent-blue transition-colors font-medium">Gallery</a>
                    <a href="/about.html" class="text-cool-gray hover:text-accent-blue transition-colors font-medium">About</a>
                    <a href="/admin.html" class="text-slate-800 hover:text-accent-blue transition-colors font-medium">Admin</a>
                    <div class="flex items-center space-x-4 ml-4 pl-4 border-l border-light-gray">
                        <span class="text-sm text-cool-gray" id="welcome-user">Welcome, Admin</span>
                        <button id="logout-btn" class="text-sm text-red-500 hover:text-red-600 transition-colors font-medium">
                            Logout
                        </button>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden text-slate-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden mt-4 pb-4">
                <div class="flex flex-col space-y-4">
                    <a href="/" class="text-cool-gray hover:text-accent-blue transition-colors font-medium">Home</a>
                    <a href="/gallery.html" class="text-cool-gray hover:text-accent-blue transition-colors font-medium">Gallery</a>
                    <a href="/about.html" class="text-cool-gray hover:text-accent-blue transition-colors font-medium">About</a>
                    <a href="/admin.html" class="text-slate-800 hover:text-accent-blue transition-colors font-medium">Admin</a>
                    <div class="pt-4 mt-4 border-t border-light-gray">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-cool-gray" id="welcome-user-mobile">Welcome, Admin</span>
                            <button id="logout-btn-mobile" class="text-sm text-red-500 hover:text-red-600 transition-colors font-medium">
                                Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Admin Header -->
    <section class="pt-24 pb-8 px-6">
        <div class="container mx-auto max-w-6xl">
            <h1 class="text-4xl md:text-5xl font-light mb-4 text-slate-800">Admin Dashboard</h1>
            <p class="text-xl text-cool-gray font-light">Manage your photography portfolio</p>
        </div>
    </section>

    <!-- Stats Cards -->
    <section class="px-6 mb-8">
        <div class="container mx-auto max-w-6xl">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="bg-white p-6 rounded-xl border border-light-gray shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-cool-gray text-sm font-medium">Total Images</p>
                            <p class="text-2xl font-light text-slate-800" id="total-images">12</p>
                        </div>
                        <div class="p-3 bg-accent-blue/10 rounded-full">
                            <svg class="w-6 h-6 text-accent-blue" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl border border-light-gray shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-cool-gray text-sm font-medium">Categories</p>
                            <p class="text-2xl font-light text-slate-800">4</p>
                        </div>
                        <div class="p-3 bg-accent-blue/10 rounded-full">
                            <svg class="w-6 h-6 text-accent-blue" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl border border-light-gray shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-cool-gray text-sm font-medium">Storage Used</p>
                            <p class="text-2xl font-light text-slate-800">2.4 GB</p>
                        </div>
                        <div class="p-3 bg-accent-blue/10 rounded-full">
                            <svg class="w-6 h-6 text-accent-blue" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl border border-light-gray shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-cool-gray text-sm font-medium">Last Upload</p>
                            <p class="text-2xl font-light text-slate-800">2d ago</p>
                        </div>
                        <div class="p-3 bg-accent-blue/10 rounded-full">
                            <svg class="w-6 h-6 text-accent-blue" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Upload Section -->
    <section class="px-6 mb-8">
        <div class="container mx-auto max-w-6xl">
            <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                <h2 class="text-2xl font-light mb-6 text-slate-800">Upload New Images</h2>
                
                <!-- Upload Area -->
                <div id="upload-area" class="border-2 border-dashed border-light-gray rounded-xl p-12 text-center hover:border-accent-blue hover:bg-light-blue/30 transition-all duration-300 cursor-pointer">
                    <div id="upload-content">
                        <svg class="w-16 h-16 mx-auto mb-4 text-cool-gray" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        <h3 class="text-xl font-medium mb-2 text-slate-800">Drop images here or click to upload</h3>
                        <p class="text-cool-gray mb-4 font-light">Support for JPEG, PNG, WebP files up to 10MB each</p>
                        <button type="button" class="bg-accent-blue text-white px-6 py-3 rounded-lg font-medium hover:bg-hover-blue transition-colors">
                            Choose Files
                        </button>
                    </div>
                    <input type="file" id="file-input" class="hidden" multiple accept="image/*">
                </div>

                <!-- Upload Progress -->
                <div id="upload-progress" class="hidden mt-6">
                    <div class="bg-light-gray rounded-full h-2">
                        <div id="progress-bar" class="bg-accent-blue h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <p class="text-sm text-cool-gray mt-2 font-light">Uploading <span id="upload-count">0</span> of <span id="upload-total">0</span> files...</p>
                </div>

                <!-- Category Selection -->
                <div class="mt-6">
                    <label class="block text-sm font-medium mb-2 text-slate-800">Category</label>
                    <div class="flex flex-col md:flex-row gap-4">
                        <select id="category-select" class="flex-1 bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                            <option value="portraits">Portraits</option>
                            <option value="events">Events</option>
                            <option value="nature">Nature</option>
                            <option value="architecture">Architecture</option>
                        </select>
                        <div class="flex items-center gap-2">
                            <span class="text-cool-gray text-sm">or</span>
                            <input 
                                type="text" 
                                id="custom-category" 
                                placeholder="Enter custom category"
                                class="flex-1 bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                            >
                            <button 
                                id="add-custom-category" 
                                class="bg-accent-blue text-white px-4 py-2 rounded-lg hover:bg-hover-blue transition-colors text-sm font-medium"
                            >
                                Add
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Data Management Section -->
    <section class="px-6 mb-8">
        <div class="container mx-auto max-w-6xl">
            <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                <h2 class="text-2xl font-light mb-6 text-slate-800">Data Management</h2>
                <p class="text-cool-gray mb-6 font-light">Backup, export, and manage your photography data.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Backup & Export -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-medium text-slate-800">Backup & Export</h3>
                        <div class="space-y-3">
                            <button id="export-data" class="w-full bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium">
                                <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                Export All Data
                            </button>
                            <button id="backup-data" class="w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                                </svg>
                                Create Backup
                            </button>
                        </div>
                    </div>
                    
                    <!-- Import & Restore -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-medium text-slate-800">Import & Restore</h3>
                        <div class="space-y-3">
                            <input type="file" id="import-file" accept=".json" class="hidden">
                            <button id="import-data" class="w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium">
                                <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                                Import Data
                            </button>
                            <button id="clear-all-data" class="w-full bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors font-medium">
                                <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                                Clear All Data
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Status Messages -->
                <div id="data-status" class="mt-6 hidden">
                    <div class="p-4 rounded-lg border">
                        <p id="status-message" class="text-sm font-medium"></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Category Management Section -->
    <section class="px-6 mb-8">
        <div class="container mx-auto max-w-6xl">
            <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                <h2 class="text-2xl font-light mb-6 text-slate-800">Category Management</h2>
                <p class="text-cool-gray mb-6 font-light">Manage your image categories. Deleting a category will also delete all images in that category.</p>
                
                <div id="category-list" class="space-y-4">
                    <!-- Categories will be loaded dynamically -->
                </div>
                
                <div id="no-categories-message" class="hidden text-center py-8">
                    <svg class="w-16 h-16 mx-auto mb-4 text-soft-gray" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                    </svg>
                    <h3 class="text-xl font-medium mb-2 text-cool-gray">No categories found</h3>
                    <p class="text-soft-gray font-light">Upload images to create categories</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Image Management Section -->
    <section class="px-6 pb-20">
        <div class="container mx-auto max-w-6xl">
            <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <h2 class="text-2xl font-light mb-4 md:mb-0 text-slate-800">Image Library</h2>
                    
                    <!-- Filters -->
                    <div class="flex flex-wrap gap-4">
                        <select id="filter-category" class="bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                            <option value="all">All Categories</option>
                            <option value="portraits">Portraits</option>
                            <option value="events">Events</option>
                            <option value="nature">Nature</option>
                            <option value="architecture">Architecture</option>
                        </select>
                        
                        <div class="flex border border-light-gray rounded-lg overflow-hidden">
                            <button id="grid-view" class="px-4 py-2 bg-accent-blue text-white">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                                </svg>
                            </button>
                            <button id="list-view" class="px-4 py-2 bg-white text-cool-gray hover:bg-light-blue transition-colors">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Image Grid -->
                <div id="image-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                    <!-- Images will be loaded dynamically from localStorage -->
                </div>

                <!-- Bulk Actions Bar -->
                <div id="bulk-actions-bar" class="hidden mt-6 p-4 bg-accent-blue/10 rounded-lg border border-accent-blue/20">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="text-sm font-medium text-slate-800">
                                <span id="selected-count">0</span> images selected
                            </span>
                            <button id="select-all-btn" class="text-sm text-accent-blue hover:text-hover-blue font-medium">
                                Select All
                            </button>
                            <button id="deselect-all-btn" class="text-sm text-cool-gray hover:text-slate-700 font-medium">
                                Deselect All
                            </button>
                        </div>
                        <div class="flex items-center space-x-3">
                            <select id="bulk-category-select" class="bg-white border border-light-gray rounded-lg px-3 py-1 text-sm text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                                <option value="">Move to category...</option>
                                <option value="portraits">Portraits</option>
                                <option value="events">Events</option>
                                <option value="nature">Nature</option>
                                <option value="architecture">Architecture</option>
                            </select>
                            <button id="bulk-move-btn" class="bg-accent-blue text-white px-4 py-1 rounded-lg hover:bg-hover-blue transition-colors text-sm font-medium">
                                Move
                            </button>
                            <button id="bulk-delete-btn" class="bg-red-500 text-white px-4 py-1 rounded-lg hover:bg-red-600 transition-colors text-sm font-medium">
                                Delete Selected
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="hidden text-center py-12">
                    <svg class="w-16 h-16 mx-auto mb-4 text-soft-gray" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <h3 class="text-xl font-medium mb-2 text-cool-gray">No images found</h3>
                    <p class="text-soft-gray font-light">Upload some images to get started</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Work Text Editor -->
    <section class="px-6 pb-8">
        <div class="container mx-auto max-w-6xl">
            <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                <h2 class="text-2xl font-light mb-6 text-slate-800">Featured Work Text Editor</h2>
                <p class="text-cool-gray mb-6 font-light">Edit the titles and descriptions that appear in the homepage Featured Work section</p>
                
                <div id="featured-work-editor" class="space-y-6">
                    <!-- Dynamic category editors will be loaded here -->
                </div>
                
                <div id="no-categories-message" class="hidden text-center py-8">
                    <svg class="w-16 h-16 mx-auto mb-4 text-soft-gray" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <h3 class="text-xl font-medium mb-2 text-cool-gray">No categories found</h3>
                    <p class="text-soft-gray font-light">Upload images to create categories for editing</p>
                </div>
            </div>
        </div>
    </section>

            <!-- Booking Management -->
        <section class="px-6 mb-8">
            <div class="container mx-auto max-w-6xl">
                <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                    <h2 class="text-2xl font-light mb-6 text-slate-800">Booking Management</h2>
                    <p class="text-cool-gray mb-6 font-light">View and manage all booking requests</p>
                    
                    <!-- Booking Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-light-blue rounded-lg p-6 text-center">
                            <div class="text-2xl font-bold text-accent-blue mb-2" id="total-bookings">0</div>
                            <div class="text-sm text-cool-gray">Total Bookings</div>
                        </div>
                        <div class="bg-light-blue rounded-lg p-6 text-center">
                            <div class="text-2xl font-bold text-success-green mb-2" id="confirmed-bookings">0</div>
                            <div class="text-sm text-cool-gray">Confirmed</div>
                        </div>
                        <div class="bg-light-blue rounded-lg p-6 text-center">
                            <div class="text-2xl font-bold text-warning-orange mb-2" id="pending-bookings">0</div>
                            <div class="text-sm text-cool-gray">Pending</div>
                        </div>
                        <div class="bg-light-blue rounded-lg p-6 text-center">
                            <div class="text-2xl font-bold text-error-red mb-2" id="cancelled-bookings">0</div>
                            <div class="text-sm text-cool-gray">Cancelled</div>
                        </div>
                    </div>
                    
                    <!-- Booking Filters -->
                    <div class="flex flex-wrap gap-4 mb-6">
                        <button class="filter-booking-btn active" data-filter="all">All Bookings</button>
                        <button class="filter-booking-btn" data-filter="confirmed">Confirmed</button>
                        <button class="filter-booking-btn" data-filter="pending">Pending</button>
                        <button class="filter-booking-btn" data-filter="cancelled">Cancelled</button>
                    </div>
                    
                    <!-- Bookings Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead class="bg-light-gray">
                                <tr>
                                    <th class="text-left p-4 font-medium text-slate-700">Client</th>
                                    <th class="text-left p-4 font-medium text-slate-700">Service</th>
                                    <th class="text-left p-4 font-medium text-slate-700">Date & Time</th>
                                    <th class="text-left p-4 font-medium text-slate-700">Status</th>
                                    <th class="text-left p-4 font-medium text-slate-700">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="bookings-table-body">
                                <!-- Bookings will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- No bookings message -->
                    <div id="no-bookings" class="text-center py-12 hidden">
                        <svg class="w-16 h-16 mx-auto mb-4 text-soft-gray" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <h3 class="text-xl font-medium text-slate-800 mb-2">No bookings yet</h3>
                        <p class="text-cool-gray">When clients book sessions, they'll appear here.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Availability Management -->
        <section class="px-6 mb-8">
            <div class="container mx-auto max-w-6xl">
                <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                    <h2 class="text-2xl font-light mb-6 text-slate-800">Availability Management</h2>
                    <p class="text-cool-gray mb-6 font-light">Mark dates as unavailable or manage your schedule</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Calendar -->
                        <div>
                            <h3 class="text-lg font-medium text-slate-800 mb-4">Calendar</h3>
                            <div class="bg-light-blue rounded-lg p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <button id="admin-prev-month" class="text-accent-blue hover:text-hover-blue transition-colors">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <h4 id="admin-current-month" class="text-lg font-medium text-slate-800">December 2024</h4>
                                    <button id="admin-next-month" class="text-accent-blue hover:text-hover-blue transition-colors">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="admin-calendar-grid" class="grid grid-cols-7 gap-1">
                                    <!-- Calendar will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Availability Controls -->
                        <div>
                            <h3 class="text-lg font-medium text-slate-800 mb-4">Quick Actions</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="unavailable-date" class="block text-sm font-medium mb-2 text-slate-700">Mark Date as Unavailable</label>
                                    <div class="flex gap-2">
                                        <input type="date" id="unavailable-date" class="flex-1 bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                                        <button id="mark-unavailable" class="bg-error-red text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors font-medium">
                                            Mark Unavailable
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="available-date" class="block text-sm font-medium mb-2 text-slate-700">Mark Date as Available</label>
                                    <div class="flex gap-2">
                                        <input type="date" id="available-date" class="flex-1 bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                                        <button id="mark-available" class="bg-success-green text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium">
                                            Mark Available
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="pt-4 border-t border-light-gray">
                                    <h4 class="text-sm font-medium text-slate-700 mb-2">Unavailable Dates</h4>
                                    <div id="unavailable-dates-list" class="space-y-2">
                                        <!-- Unavailable dates will be listed here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Page Editor -->
        <section class="px-6 pb-8">
            <div class="container mx-auto max-w-6xl">
                <div class="bg-white rounded-xl border border-light-gray shadow-sm p-8">
                    <h2 class="text-2xl font-light mb-6 text-slate-800">About Page Editor</h2>
                    <p class="text-cool-gray mb-6 font-light">Edit the content that appears on the About page</p>
                
                <form id="about-page-form" class="space-y-8">
                    <!-- Photographer Information -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-medium text-slate-800 border-b border-light-gray pb-2">Photographer Information</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">Photographer Name</label>
                                <input 
                                    type="text" 
                                    id="photographer-name" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="Alex Morgan"
                                >
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">Location</label>
                                <input 
                                    type="text" 
                                    id="photographer-location" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="San Francisco, CA"
                                >
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2 text-slate-700">Profile Image URL</label>
                            <input 
                                type="url" 
                                id="photographer-image" 
                                class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                placeholder="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                            >
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2 text-slate-700">Short Bio</label>
                            <textarea 
                                id="photographer-bio" 
                                rows="3"
                                class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors resize-none"
                                placeholder="Professional photographer with over 8 years of experience capturing life's most meaningful moments. Based in San Francisco, I specialize in creating timeless images that tell authentic stories."
                            ></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2 text-slate-700">Skills (comma-separated)</label>
                            <input 
                                type="text" 
                                id="photographer-skills" 
                                class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                placeholder="Portrait Photography, Event Coverage, Nature Photography"
                            >
                        </div>
                    </div>

                    <!-- About Sections -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-medium text-slate-800 border-b border-light-gray pb-2">About Sections</h3>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2 text-slate-700">"Who I Am" Section</label>
                            <textarea 
                                id="who-i-am" 
                                rows="6"
                                class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors resize-none"
                                placeholder="I'm a passionate photographer who believes every moment has a story worth telling..."
                            ></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2 text-slate-700">"Why I Shoot" Section</label>
                            <textarea 
                                id="why-i-shoot" 
                                rows="6"
                                class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors resize-none"
                                placeholder="Photography is more than just capturing imagesâ€”it's about freezing moments in time..."
                            ></textarea>
                        </div>
                    </div>

                    <!-- Services -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-medium text-slate-800 border-b border-light-gray pb-2">Services</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="space-y-4">
                                <h4 class="font-medium text-slate-700">Portrait Photography</h4>
                                <textarea 
                                    id="service-portraits" 
                                    rows="3"
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors resize-none"
                                    placeholder="Professional headshots, family portraits, and personal branding photography that captures your authentic self."
                                ></textarea>
                            </div>
                            
                            <div class="space-y-4">
                                <h4 class="font-medium text-slate-700">Event Coverage</h4>
                                <textarea 
                                    id="service-events" 
                                    rows="3"
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors resize-none"
                                    placeholder="Weddings, corporate events, and special occasions documented with a blend of candid and posed photography."
                                ></textarea>
                            </div>
                            
                            <div class="space-y-4">
                                <h4 class="font-medium text-slate-700">Nature & Landscape</h4>
                                <textarea 
                                    id="service-nature" 
                                    rows="3"
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors resize-none"
                                    placeholder="Fine art nature photography and landscape prints that showcase the raw beauty of our natural world."
                                ></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Awards -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-medium text-slate-800 border-b border-light-gray pb-2">Awards & Recognition</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="space-y-4">
                                <input 
                                    type="text" 
                                    id="award-1-year" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="2023"
                                >
                                <input 
                                    type="text" 
                                    id="award-1-title" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="Best Portrait Photography"
                                >
                                <input 
                                    type="text" 
                                    id="award-1-organization" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="San Francisco Photography Awards"
                                >
                            </div>
                            
                            <div class="space-y-4">
                                <input 
                                    type="text" 
                                    id="award-2-year" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="2022"
                                >
                                <input 
                                    type="text" 
                                    id="award-2-title" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="Wedding Photographer of the Year"
                                >
                                <input 
                                    type="text" 
                                    id="award-2-organization" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="California Wedding Association"
                                >
                            </div>
                            
                            <div class="space-y-4">
                                <input 
                                    type="text" 
                                    id="award-3-year" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="2021"
                                >
                                <input 
                                    type="text" 
                                    id="award-3-title" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="Nature Photography Excellence"
                                >
                                <input 
                                    type="text" 
                                    id="award-3-organization" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="National Geographic Local"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-medium text-slate-800 border-b border-light-gray pb-2">Contact Information</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">Email Address</label>
                                <input 
                                    type="email" 
                                    id="contact-email" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="alex@subjectphoto.com"
                                >
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">CTA Button Text</label>
                                <input 
                                    type="text" 
                                    id="cta-button-text" 
                                    class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                                    placeholder="Get In Touch"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- Social Links -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-medium text-slate-800 border-b border-light-gray pb-2">Social Links</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">Instagram URL</label>
                                <input type="url" id="social-instagram" class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors" placeholder="https://instagram.com/yourprofile">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">Facebook URL</label>
                                <input type="url" id="social-facebook" class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors" placeholder="https://facebook.com/yourprofile">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">Twitter URL</label>
                                <input type="url" id="social-twitter" class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors" placeholder="https://twitter.com/yourprofile">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">LinkedIn URL</label>
                                <input type="url" id="social-linkedin" class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors" placeholder="https://linkedin.com/in/yourprofile">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 text-slate-700">Website URL</label>
                                <input type="url" id="social-website" class="w-full bg-white border border-light-gray rounded-lg px-4 py-3 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors" placeholder="https://yourwebsite.com">
                            </div>
                        </div>
                    </div>

                    <!-- Save Button -->
                    <div class="flex justify-end pt-6 border-t border-light-gray">
                        <button 
                            type="submit" 
                            class="bg-accent-blue text-white px-8 py-3 rounded-lg hover:bg-hover-blue transition-colors font-medium"
                        >
                            Save About Page Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="hidden fixed inset-0 bg-slate-900/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl border border-light-gray shadow-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-medium mb-4 text-slate-800">Delete Image</h3>
            <p class="text-cool-gray mb-6 font-light">Are you sure you want to delete this image? This action cannot be undone.</p>
            <div class="flex gap-4">
                <button id="confirm-delete" class="flex-1 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors font-medium">
                    Delete
                </button>
                <button id="cancel-delete" class="flex-1 bg-light-gray text-slate-700 px-4 py-2 rounded-lg hover:bg-soft-gray hover:text-white transition-colors font-medium">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Category Confirmation Modal -->
    <div id="delete-category-modal" class="hidden fixed inset-0 bg-slate-900/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl border border-light-gray shadow-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-medium mb-4 text-slate-800">Delete Category</h3>
            <p class="text-cool-gray mb-6 font-light">Are you sure you want to delete this category? This will also delete all images in this category. This action cannot be undone.</p>
            <div class="flex gap-4">
                <button id="confirm-delete-category" class="flex-1 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors font-medium">
                    Delete Category
                </button>
                <button id="cancel-delete-category" class="flex-1 bg-light-gray text-slate-700 px-4 py-2 rounded-lg hover:bg-soft-gray hover:text-white transition-colors font-medium">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Quick Edit Modal -->
    <div id="quick-edit-modal" class="hidden fixed inset-0 bg-slate-900/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl border border-light-gray shadow-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-medium mb-4 text-slate-800">Quick Edit Image</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-700">Image Name</label>
                    <input type="text" id="quick-edit-name" class="w-full bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-700">Category</label>
                    <select id="quick-edit-category" class="w-full bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                        <option value="portraits">Portraits</option>
                        <option value="events">Events</option>
                        <option value="nature">Nature</option>
                        <option value="architecture">Architecture</option>
                    </select>
                </div>
            </div>
            <div class="flex gap-4 mt-6">
                <button id="save-quick-edit" class="flex-1 bg-accent-blue text-white px-4 py-2 rounded-lg hover:bg-hover-blue transition-colors font-medium">
                    Save Changes
                </button>
                <button id="cancel-quick-edit" class="flex-1 bg-light-gray text-slate-700 px-4 py-2 rounded-lg hover:bg-soft-gray hover:text-white transition-colors font-medium">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Move Category Modal -->
    <div id="move-category-modal" class="hidden fixed inset-0 bg-slate-900/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl border border-light-gray shadow-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-medium mb-4 text-slate-800">Move to Category</h3>
            <p class="text-cool-gray mb-4 font-light">Select a new category for this image:</p>
            <div class="space-y-4">
                <select id="move-category-select" class="w-full bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors">
                    <option value="portraits">Portraits</option>
                    <option value="events">Events</option>
                    <option value="nature">Nature</option>
                    <option value="architecture">Architecture</option>
                </select>
            </div>
            <div class="flex gap-4 mt-6">
                <button id="confirm-move-category" class="flex-1 bg-accent-blue text-white px-4 py-2 rounded-lg hover:bg-hover-blue transition-colors font-medium">
                    Move Image
                </button>
                <button id="cancel-move-category" class="flex-1 bg-light-gray text-slate-700 px-4 py-2 rounded-lg hover:bg-soft-gray hover:text-white transition-colors font-medium">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <script>
        // Authentication check
        if (localStorage.getItem('adminLoggedIn') !== 'true') {
            window.location.href = '/login.html';
        }

        // Update welcome message
        const username = localStorage.getItem('adminUsername') || 'Admin';
        document.getElementById('welcome-user').textContent = `Welcome, ${username}`;
        document.getElementById('welcome-user-mobile').textContent = `Welcome, ${username}`;

        // Logout functionality
        function logout() {
            localStorage.removeItem('adminLoggedIn');
            localStorage.removeItem('adminUsername');
            window.location.href = '/login.html';
        }

        document.getElementById('logout-btn').addEventListener('click', logout);
        document.getElementById('logout-btn-mobile').addEventListener('click', logout);

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Image storage management
        function getStoredImages() {
            const stored = localStorage.getItem('adminImages');
            return stored ? JSON.parse(stored) : [];
        }

        function saveStoredImages(images) {
            localStorage.setItem('adminImages', JSON.stringify(images));
        }

        function generateImageId() {
            return 'img_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Custom categories management
        function getCustomCategories() {
            const stored = localStorage.getItem('customCategories');
            return stored ? JSON.parse(stored) : [];
        }

        function saveCustomCategories(categories) {
            localStorage.setItem('customCategories', JSON.stringify(categories));
        }

        function addCustomCategory(categoryName) {
            const categories = getCustomCategories();
            const normalizedName = categoryName.toLowerCase().trim();
            
            if (!categories.includes(normalizedName)) {
                categories.push(normalizedName);
                saveCustomCategories(categories);
                updateCategoryDropdowns();
                return true;
            }
            return false;
        }

        function updateCategoryDropdowns() {
            const customCategories = getCustomCategories();
            const categorySelect = document.getElementById('category-select');
            const filterCategory = document.getElementById('filter-category');
            
            // Get all available categories (including default ones that haven't been deleted)
            const allCategories = getAllCategories();
            const defaultOptions = ['portraits', 'events', 'nature', 'architecture'];
            const availableDefaultOptions = defaultOptions.filter(option => allCategories.includes(option));
            
            // Update category select
            categorySelect.innerHTML = '';
            availableDefaultOptions.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option;
                opt.textContent = option.charAt(0).toUpperCase() + option.slice(1);
                categorySelect.appendChild(opt);
            });
            
            // Add custom categories
            customCategories.forEach(category => {
                const opt = document.createElement('option');
                opt.value = category;
                opt.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                categorySelect.appendChild(opt);
            });
            
            // Update filter dropdown
            filterCategory.innerHTML = '<option value="all">All Categories</option>';
            availableDefaultOptions.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option;
                opt.textContent = option.charAt(0).toUpperCase() + option.slice(1);
                filterCategory.appendChild(opt);
            });
            
            // Add custom categories to filter
            customCategories.forEach(category => {
                const opt = document.createElement('option');
                opt.value = category;
                opt.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                filterCategory.appendChild(opt);
            });
            
            // Update bulk operations dropdown
            updateBulkOperationsDropdown();
            
            // Update modal dropdowns
            updateModalDropdowns();
        }

        function updateBulkOperationsDropdown() {
            const customCategories = getCustomCategories();
            const bulkCategorySelect = document.getElementById('bulk-category-select');
            const allCategories = getAllCategories();
            const defaultOptions = ['portraits', 'events', 'nature', 'architecture'];
            const availableDefaultOptions = defaultOptions.filter(option => allCategories.includes(option));
            
            // Clear and rebuild bulk category select
            bulkCategorySelect.innerHTML = '<option value="">Move to category...</option>';
            
            availableDefaultOptions.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option;
                opt.textContent = option.charAt(0).toUpperCase() + option.slice(1);
                bulkCategorySelect.appendChild(opt);
            });
            
            // Add custom categories
            customCategories.forEach(category => {
                const opt = document.createElement('option');
                opt.value = category;
                opt.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                bulkCategorySelect.appendChild(opt);
            });
        }

        function updateModalDropdowns() {
            const customCategories = getCustomCategories();
            const allCategories = getAllCategories();
            const defaultOptions = ['portraits', 'events', 'nature', 'architecture'];
            const availableDefaultOptions = defaultOptions.filter(option => allCategories.includes(option));
            
            // Update quick edit modal dropdown
            const quickEditCategory = document.getElementById('quick-edit-category');
            if (quickEditCategory) {
                quickEditCategory.innerHTML = '';
                availableDefaultOptions.forEach(option => {
                    const opt = document.createElement('option');
                    opt.value = option;
                    opt.textContent = option.charAt(0).toUpperCase() + option.slice(1);
                    quickEditCategory.appendChild(opt);
                });
                
                customCategories.forEach(category => {
                    const opt = document.createElement('option');
                    opt.value = category;
                    opt.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                    quickEditCategory.appendChild(opt);
                });
            }
            
            // Update move category modal dropdown
            const moveCategorySelect = document.getElementById('move-category-select');
            if (moveCategorySelect) {
                moveCategorySelect.innerHTML = '';
                availableDefaultOptions.forEach(option => {
                    const opt = document.createElement('option');
                    opt.value = option;
                    opt.textContent = option.charAt(0).toUpperCase() + option.slice(1);
                    moveCategorySelect.appendChild(opt);
                });
                
                customCategories.forEach(category => {
                    const opt = document.createElement('option');
                    opt.value = category;
                    opt.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                    moveCategorySelect.appendChild(opt);
                });
            }
        }

        // File upload functionality
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('file-input');
        const uploadProgress = document.getElementById('upload-progress');
        const progressBar = document.getElementById('progress-bar');
        const uploadCount = document.getElementById('upload-count');
        const uploadTotal = document.getElementById('upload-total');

        // Drag and drop handlers
        uploadArea.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('border-accent-blue', 'bg-light-blue/50');
        });
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('border-accent-blue', 'bg-light-blue/50');
        });
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('border-accent-blue', 'bg-light-blue/50');
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        function handleFiles(files) {
            if (files.length === 0) return;

            uploadProgress.classList.remove('hidden');
            uploadTotal.textContent = files.length;
            
            // Process files and save to storage
            const category = document.getElementById('category-select').value;
            let uploaded = 0;
            const newImages = [];

            Array.from(files).forEach((file, index) => {
                try {
                    // Validate file before processing
                    validateImageFile(file);
                    
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        // Create image object
                        const imageData = {
                            id: generateImageId(),
                            src: e.target.result,
                            name: file.name,
                            category: category,
                            uploadDate: new Date().toISOString(),
                            size: file.size
                        };
                        
                        newImages.push(imageData);
                        uploaded++;
                        uploadCount.textContent = uploaded;
                        progressBar.style.width = `${(uploaded / files.length) * 100}%`;
                        
                        // When all files are processed
                        if (uploaded >= files.length) {
                            // Save to localStorage
                            const existingImages = getStoredImages();
                            const updatedImages = [...existingImages, ...newImages];
                            saveStoredImages(updatedImages);
                            
                            setTimeout(() => {
                                uploadProgress.classList.add('hidden');
                                progressBar.style.width = '0%';
                                fileInput.value = ''; // Clear file input
                                
                                // Refresh the grid to show new images
                                loadImagesFromStorage();
                                updateImageCount();
                                
                                // Show success message
                                showSuccessMessage(`Successfully uploaded ${uploaded} image${uploaded > 1 ? 's' : ''}!`);
                            }, 500);
                        }
                    };
                    reader.readAsDataURL(file);
                } catch (error) {
                    showErrorMessage(`Error with file "${file.name}": ${error.message}`);
                    uploaded++;
                    uploadCount.textContent = uploaded;
                    progressBar.style.width = `${(uploaded / files.length) * 100}%`;
                    
                    // Continue processing other files
                    if (uploaded >= files.length) {
                        setTimeout(() => {
                            uploadProgress.classList.add('hidden');
                            progressBar.style.width = '0%';
                            fileInput.value = '';
                            
                            if (newImages.length > 0) {
                                const existingImages = getStoredImages();
                                const updatedImages = [...existingImages, ...newImages];
                                saveStoredImages(updatedImages);
                                loadImagesFromStorage();
                                updateImageCount();
                                showSuccessMessage(`Successfully uploaded ${newImages.length} image${newImages.length > 1 ? 's' : ''}!`);
                            }
                        }, 500);
                    }
                }
            });
        }

        // Load images from storage and display them
        function loadImagesFromStorage() {
            const images = getStoredImages();
            const imageGrid = document.getElementById('image-grid');
            
            // Clear existing dynamic images (keep sample images)
            const dynamicImages = imageGrid.querySelectorAll('.dynamic-image');
            dynamicImages.forEach(img => img.remove());
            
            // Add stored images
            images.forEach(imageData => {
                const imageItem = createImageItem(imageData.src, imageData.name, imageData.category, imageData.id);
                imageItem.classList.add('dynamic-image'); // Mark as dynamic
                imageGrid.appendChild(imageItem);
            });
            
            checkEmptyState();
        }

        // Success message function
        function showSuccessMessage(message) {
            // Create success message element
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed top-24 right-6 bg-green-50 border border-green-200 rounded-lg p-4 z-50 shadow-lg';
            successDiv.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-green-700 text-sm font-medium">${message}</span>
                </div>
            `;
            
            document.body.appendChild(successDiv);
            
            // Remove after 3 seconds
            setTimeout(() => {
                if (successDiv.parentNode) {
                    successDiv.remove();
                }
            }, 3000);
        }

        // Error message function
        function showErrorMessage(message) {
            // Create error message element
            const errorDiv = document.createElement('div');
            errorDiv.className = 'fixed top-24 right-6 bg-red-50 border border-red-200 rounded-lg p-4 z-50 shadow-lg';
            errorDiv.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-5 h-5 text-red-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-red-700 text-sm font-medium">${message}</span>
                </div>
            `;
            
            document.body.appendChild(errorDiv);
            
            // Remove after 5 seconds
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.remove();
                }
            }, 5000);
        }

        // File validation function
        function validateImageFile(file) {
            const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];
            const maxSize = 10 * 1024 * 1024; // 10MB
            
            if (!allowedTypes.includes(file.type)) {
                throw new Error('Invalid file type. Please upload JPEG, PNG, GIF, or WebP images only.');
            }
            
            if (file.size > maxSize) {
                throw new Error('File size too large. Please upload images smaller than 10MB.');
            }
            
            return true;
        }

        function createImageItem(src, name, category, imageId = null) {
            const div = document.createElement('div');
            div.className = 'image-item group relative';
            div.setAttribute('data-category', category);
            if (imageId) {
                div.setAttribute('data-image-id', imageId);
            }
            
            const categoryColors = {
                portraits: 'bg-accent-blue text-white',
                nature: 'bg-green-500 text-white',
                events: 'bg-blue-500 text-white',
                architecture: 'bg-purple-500 text-white'
            };

            div.innerHTML = `
                <div class="relative overflow-hidden rounded-lg bg-light-blue">
                    <!-- Checkbox for bulk selection -->
                    <div class="absolute top-2 right-2 z-10">
                        <input type="checkbox" class="image-checkbox w-4 h-4 text-accent-blue bg-white border-gray-300 rounded focus:ring-accent-blue focus:ring-2" data-image-id="${imageId}">
                    </div>
                    
                    <img 
                        src="${src}"
                        alt="${name}"
                        class="w-full aspect-square object-cover"
                    >
                    
                    <!-- Hover overlay with actions -->
                    <div class="absolute inset-0 bg-slate-900/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                        <div class="flex space-x-2">
                            <button class="quick-edit-btn p-2 bg-white text-slate-700 rounded-lg hover:bg-light-blue transition-colors shadow-sm" title="Quick Edit">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path>
                                </svg>
                            </button>
                            <button class="move-category-btn p-2 bg-white text-slate-700 rounded-lg hover:bg-light-blue transition-colors shadow-sm" title="Move Category">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                            <button class="delete-btn p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-sm" title="Delete">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" clip-rule="evenodd"></path>
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Category badge -->
                    <div class="absolute top-2 left-2 ${categoryColors[category]} text-xs px-2 py-1 rounded">
                        ${category.charAt(0).toUpperCase() + category.slice(1)}
                    </div>
                    
                    <!-- Image name on bottom -->
                    <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-slate-900/70 to-transparent p-2">
                        <p class="text-white text-xs truncate">${name}</p>
                    </div>
                </div>
            `;

            // Add event listeners
            const checkbox = div.querySelector('.image-checkbox');
            const deleteBtn = div.querySelector('.delete-btn');
            const quickEditBtn = div.querySelector('.quick-edit-btn');
            const moveCategoryBtn = div.querySelector('.move-category-btn');
            
            // Checkbox selection
            checkbox.addEventListener('change', () => {
                updateBulkActionsBar();
            });
            
            // Delete button
            deleteBtn.addEventListener('click', () => showDeleteModal(div));
            
            // Quick edit button
            quickEditBtn.addEventListener('click', () => {
                showQuickEditModal(div);
            });
            
            // Move category button
            moveCategoryBtn.addEventListener('click', () => {
                showMoveCategoryModal(div);
            });
            
            return div;
        }

        // Filter functionality
        const filterCategory = document.getElementById('filter-category');
        filterCategory.addEventListener('change', () => {
            const selectedCategory = filterCategory.value;
            const imageItems = document.querySelectorAll('.image-item');
            
            imageItems.forEach(item => {
                if (selectedCategory === 'all' || item.getAttribute('data-category') === selectedCategory) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
            
            checkEmptyState();
        });

        // Delete functionality
        const deleteModal = document.getElementById('delete-modal');
        const confirmDelete = document.getElementById('confirm-delete');
        const cancelDelete = document.getElementById('cancel-delete');
        let itemToDelete = null;

        function showDeleteModal(item) {
            itemToDelete = item;
            deleteModal.classList.remove('hidden');
        }

        confirmDelete.addEventListener('click', () => {
            if (itemToDelete) {
                const imageId = itemToDelete.getAttribute('data-image-id');
                
                // If it's a stored image, remove from localStorage
                if (imageId) {
                    const images = getStoredImages();
                    const updatedImages = images.filter(img => img.id !== imageId);
                    saveStoredImages(updatedImages);
                    showSuccessMessage('Image deleted successfully!');
                }
                
                // Remove from DOM
                itemToDelete.remove();
                updateImageCount();
                checkEmptyState();
                itemToDelete = null;
            }
            deleteModal.classList.add('hidden');
        });

        cancelDelete.addEventListener('click', () => {
            itemToDelete = null;
            deleteModal.classList.add('hidden');
        });

        // Bulk operations functionality
        function updateBulkActionsBar() {
            const selectedCheckboxes = document.querySelectorAll('.image-checkbox:checked');
            const bulkActionsBar = document.getElementById('bulk-actions-bar');
            const selectedCount = document.getElementById('selected-count');
            
            if (selectedCheckboxes.length > 0) {
                bulkActionsBar.classList.remove('hidden');
                selectedCount.textContent = selectedCheckboxes.length;
            } else {
                bulkActionsBar.classList.add('hidden');
            }
        }

        // Select all functionality
        document.getElementById('select-all-btn').addEventListener('click', () => {
            const checkboxes = document.querySelectorAll('.image-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = true;
            });
            updateBulkActionsBar();
        });

        // Deselect all functionality
        document.getElementById('deselect-all-btn').addEventListener('click', () => {
            const checkboxes = document.querySelectorAll('.image-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            updateBulkActionsBar();
        });

        // Bulk move functionality
        document.getElementById('bulk-move-btn').addEventListener('click', () => {
            const selectedCheckboxes = document.querySelectorAll('.image-checkbox:checked');
            const newCategory = document.getElementById('bulk-category-select').value;
            
            if (newCategory && selectedCheckboxes.length > 0) {
                const images = getStoredImages();
                let updated = false;
                
                selectedCheckboxes.forEach(checkbox => {
                    const imageId = checkbox.getAttribute('data-image-id');
                    const imageIndex = images.findIndex(img => img.id === imageId);
                    
                    if (imageIndex !== -1) {
                        images[imageIndex].category = newCategory;
                        updated = true;
                    }
                });
                
                if (updated) {
                    saveStoredImages(images);
                    loadImagesFromStorage();
                    updateImageCount();
                    showSuccessMessage(`Moved ${selectedCheckboxes.length} image${selectedCheckboxes.length > 1 ? 's' : ''} to ${newCategory}!`);
                    
                    // Clear selection
                    selectedCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    updateBulkActionsBar();
                }
            }
        });

        // Bulk delete functionality
        document.getElementById('bulk-delete-btn').addEventListener('click', () => {
            const selectedCheckboxes = document.querySelectorAll('.image-checkbox:checked');
            
            if (selectedCheckboxes.length > 0) {
                if (confirm(`Are you sure you want to delete ${selectedCheckboxes.length} image${selectedCheckboxes.length > 1 ? 's' : ''}?`)) {
                    const images = getStoredImages();
                    let deleted = false;
                    
                    selectedCheckboxes.forEach(checkbox => {
                        const imageId = checkbox.getAttribute('data-image-id');
                        const imageIndex = images.findIndex(img => img.id === imageId);
                        
                        if (imageIndex !== -1) {
                            images.splice(imageIndex, 1);
                            deleted = true;
                        }
                    });
                    
                    if (deleted) {
                        saveStoredImages(images);
                        loadImagesFromStorage();
                        updateImageCount();
                        showSuccessMessage(`Deleted ${selectedCheckboxes.length} image${selectedCheckboxes.length > 1 ? 's' : ''}!`);
                        
                        // Clear selection
                        selectedCheckboxes.forEach(checkbox => {
                            checkbox.checked = false;
                        });
                        updateBulkActionsBar();
                    }
                }
            }
        });

        // Event listeners for delete buttons are added dynamically when images are created

        function updateImageCount() {
            const totalImages = document.querySelectorAll('.image-item').length;
            document.getElementById('total-images').textContent = totalImages;
        }

        // Custom category functionality
        const addCustomCategoryBtn = document.getElementById('add-custom-category');
        const customCategoryInput = document.getElementById('custom-category');

        addCustomCategoryBtn.addEventListener('click', () => {
            const categoryName = customCategoryInput.value.trim();
            if (categoryName) {
                if (addCustomCategory(categoryName)) {
                    customCategoryInput.value = '';
                    showSuccessMessage(`Category "${categoryName}" added successfully!`);
                } else {
                    showSuccessMessage(`Category "${categoryName}" already exists!`);
                }
            }
        });

        customCategoryInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addCustomCategoryBtn.click();
            }
        });

        // Initialize page - load stored images and categories on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateCategoryDropdowns();
            loadImagesFromStorage();
            updateImageCount();
        });

        // Also load when the page becomes visible (for browser back/forward)
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                updateCategoryDropdowns();
                loadImagesFromStorage();
                updateImageCount();
            }
        });

        function checkEmptyState() {
            const visibleImages = document.querySelectorAll('.image-item:not([style*="display: none"])').length;
            const emptyState = document.getElementById('empty-state');
            const imageGrid = document.getElementById('image-grid');
            
            if (visibleImages === 0) {
                emptyState.classList.remove('hidden');
                imageGrid.classList.add('hidden');
            } else {
                emptyState.classList.add('hidden');
                imageGrid.classList.remove('hidden');
            }
        }

        // View toggle
        const gridView = document.getElementById('grid-view');
        const listView = document.getElementById('list-view');

        gridView.addEventListener('click', () => {
            gridView.classList.add('bg-accent-blue', 'text-white');
            gridView.classList.remove('bg-white', 'text-cool-gray');
            listView.classList.add('bg-white', 'text-cool-gray');
            listView.classList.remove('bg-accent-blue', 'text-white');
            
            const imageGrid = document.getElementById('image-grid');
            imageGrid.className = 'grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4';
        });

        listView.addEventListener('click', () => {
            listView.classList.add('bg-accent-blue', 'text-white');
            listView.classList.remove('bg-white', 'text-cool-gray');
            gridView.classList.add('bg-white', 'text-cool-gray');
            gridView.classList.remove('bg-accent-blue', 'text-white');
            
            const imageGrid = document.getElementById('image-grid');
            imageGrid.className = 'grid grid-cols-1 md:grid-cols-2 gap-4';
        });

        // Category Management functionality
        function getAllCategories() {
            const images = getStoredImages();
            const customCategories = getCustomCategories();
            
            // Get categories from images
            const imageCategories = [...new Set(images.map(img => img.category))];
            
            // Get all custom categories (including those without images)
            const allCustomCategories = customCategories.filter(cat => 
                !['portraits', 'events', 'nature', 'architecture'].includes(cat)
            );
            
            // Get default categories that still have images or haven't been deleted
            const defaultCategories = ['portraits', 'events', 'nature', 'architecture'];
            const availableDefaultCategories = defaultCategories.filter(cat => 
                imageCategories.includes(cat) || !hasCategoryBeenDeleted(cat)
            );
            
            // Combine and remove duplicates
            const allCategories = [...new Set([...imageCategories, ...allCustomCategories, ...availableDefaultCategories])];
            
            return allCategories;
        }

        function hasCategoryBeenDeleted(category) {
            // Check if a default category has been explicitly deleted
            const deletedCategories = JSON.parse(localStorage.getItem('deletedCategories') || '[]');
            return deletedCategories.includes(category);
        }

        function markCategoryAsDeleted(category) {
            const deletedCategories = JSON.parse(localStorage.getItem('deletedCategories') || '[]');
            if (!deletedCategories.includes(category)) {
                deletedCategories.push(category);
                localStorage.setItem('deletedCategories', JSON.stringify(deletedCategories));
            }
        }

        function getCategoryImageCount(category) {
            const images = getStoredImages();
            return images.filter(img => img.category === category).length;
        }

        function deleteCategory(category) {
            // Remove all images in this category
            const images = getStoredImages();
            const updatedImages = images.filter(img => img.category !== category);
            saveStoredImages(updatedImages);
            
            // Remove from custom categories if it's a custom one
            const customCategories = getCustomCategories();
            const updatedCustomCategories = customCategories.filter(cat => cat !== category);
            saveCustomCategories(updatedCustomCategories);
            
            // Remove custom titles/descriptions for this category
            const customData = JSON.parse(localStorage.getItem('categoryDescriptions') || '{}');
            delete customData[category + '_title'];
            delete customData[category];
            localStorage.setItem('categoryDescriptions', JSON.stringify(customData));
            
            // Mark default category as deleted if it's a default one
            const defaultCategories = ['portraits', 'events', 'nature', 'architecture'];
            if (defaultCategories.includes(category)) {
                markCategoryAsDeleted(category);
            }
            
            // Refresh all sections
            updateCategoryDropdowns();
            loadImagesFromStorage();
            updateImageCount();
            loadFeaturedWorkEditor();
            loadCategoryList();
        }

        function createCategoryItem(category) {
            const div = document.createElement('div');
            div.className = 'flex items-center justify-between p-4 bg-light-blue rounded-lg border border-light-gray';
            
            const imageCount = getCategoryImageCount(category);
            const isCustom = !['portraits', 'events', 'nature', 'architecture'].includes(category);
            
            div.innerHTML = `
                <div class="flex items-center space-x-4">
                    <div class="p-2 bg-accent-blue/10 rounded-full">
                        <svg class="w-6 h-6 text-accent-blue" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-medium text-slate-800">${category.charAt(0).toUpperCase() + category.slice(1)}</h3>
                        <p class="text-sm text-cool-gray">${imageCount} image${imageCount !== 1 ? 's' : ''}</p>
                    </div>
                    ${isCustom ? '<span class="text-xs bg-accent-blue text-white px-2 py-1 rounded">Custom</span>' : '<span class="text-xs bg-orange-500 text-white px-2 py-1 rounded">Default</span>'}
                </div>
                <button 
                    class="delete-category-btn bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition-colors text-sm font-medium"
                    data-category="${category}"
                >
                    Delete
                </button>
            `;
            
            // Add delete event listener
            const deleteBtn = div.querySelector('.delete-category-btn');
            deleteBtn.addEventListener('click', () => {
                showDeleteCategoryModal(category);
            });
            
            return div;
        }

        function loadCategoryList() {
            const categoryList = document.getElementById('category-list');
            const noCategoriesMessage = document.getElementById('no-categories-message');
            const categories = getAllCategories();
            
            // Clear existing content
            categoryList.innerHTML = '';
            
            if (categories.length === 0) {
                noCategoriesMessage.classList.remove('hidden');
                categoryList.classList.add('hidden');
                return;
            }
            
            noCategoriesMessage.classList.add('hidden');
            categoryList.classList.remove('hidden');
            
            // Create category items
            categories.forEach(category => {
                const categoryItem = createCategoryItem(category);
                categoryList.appendChild(categoryItem);
            });
        }

        // Delete category modal functionality
        const deleteCategoryModal = document.getElementById('delete-category-modal');
        const confirmDeleteCategory = document.getElementById('confirm-delete-category');
        const cancelDeleteCategory = document.getElementById('cancel-delete-category');
        let categoryToDelete = null;

        function showDeleteCategoryModal(category) {
            categoryToDelete = category;
            deleteCategoryModal.classList.remove('hidden');
        }

        confirmDeleteCategory.addEventListener('click', () => {
            if (categoryToDelete) {
                deleteCategory(categoryToDelete);
                showSuccessMessage(`Category "${categoryToDelete.charAt(0).toUpperCase() + categoryToDelete.slice(1)}" deleted successfully!`);
                categoryToDelete = null;
            }
            deleteCategoryModal.classList.add('hidden');
        });

        cancelDeleteCategory.addEventListener('click', () => {
            categoryToDelete = null;
            deleteCategoryModal.classList.add('hidden');
        });

        // Quick Edit Modal functionality
        const quickEditModal = document.getElementById('quick-edit-modal');
        const quickEditNameInput = document.getElementById('quick-edit-name');
        const quickEditCategorySelect = document.getElementById('quick-edit-category');
        const saveQuickEditBtn = document.getElementById('save-quick-edit');
        const cancelQuickEditBtn = document.getElementById('cancel-quick-edit');
        let itemToQuickEdit = null;

        function showQuickEditModal(item) {
            itemToQuickEdit = item;
            const imageId = item.getAttribute('data-image-id');
            const images = getStoredImages();
            const image = images.find(img => img.id === imageId);
            
            if (image) {
                quickEditNameInput.value = image.name;
                quickEditCategorySelect.value = image.category;
                quickEditModal.classList.remove('hidden');
            }
        }

        saveQuickEditBtn.addEventListener('click', () => {
            if (itemToQuickEdit) {
                const newName = quickEditNameInput.value.trim();
                const newCategory = quickEditCategorySelect.value;
                const imageId = itemToQuickEdit.getAttribute('data-image-id');
                
                if (newName && newCategory) {
                    const images = getStoredImages();
                    const imageIndex = images.findIndex(img => img.id === imageId);
                    
                    if (imageIndex !== -1) {
                        images[imageIndex].name = newName;
                        images[imageIndex].category = newCategory;
                        saveStoredImages(images);
                        
                        // Update UI
                        itemToQuickEdit.setAttribute('data-category', newCategory);
                        itemToQuickEdit.querySelector('p').textContent = newName;
                        itemToQuickEdit.querySelector('.category-badge').textContent = newCategory.charAt(0).toUpperCase() + newCategory.slice(1);
                        
                        showSuccessMessage('Image updated successfully!');
                    }
                }
                
                itemToQuickEdit = null;
            }
            quickEditModal.classList.add('hidden');
        });

        cancelQuickEditBtn.addEventListener('click', () => {
            itemToQuickEdit = null;
            quickEditModal.classList.add('hidden');
        });

        // Move Category Modal functionality
        const moveCategoryModal = document.getElementById('move-category-modal');
        const moveCategorySelect = document.getElementById('move-category-select');
        const confirmMoveCategoryBtn = document.getElementById('confirm-move-category');
        const cancelMoveCategoryBtn = document.getElementById('cancel-move-category');
        let itemToMove = null;

        confirmMoveCategoryBtn.addEventListener('click', () => {
            if (itemToMove) {
                const newCategory = moveCategorySelect.value;
                const imageId = itemToMove.getAttribute('data-image-id');
                
                if (newCategory) {
                    const images = getStoredImages();
                    const imageIndex = images.findIndex(img => img.id === imageId);
                    
                    if (imageIndex !== -1) {
                        images[imageIndex].category = newCategory;
                        saveStoredImages(images);
                        
                        // Update UI
                        itemToMove.setAttribute('data-category', newCategory);
                        itemToMove.querySelector('.category-badge').textContent = newCategory.charAt(0).toUpperCase() + newCategory.slice(1);
                        
                        showSuccessMessage('Image moved to category successfully!');
                    }
                }
                
                itemToMove = null;
            }
            moveCategoryModal.classList.add('hidden');
        });

        cancelMoveCategoryBtn.addEventListener('click', () => {
            itemToMove = null;
            moveCategoryModal.classList.add('hidden');
        });

        // Featured Work Text Editor functionality
        function getCustomTitle(category) {
            const customData = JSON.parse(localStorage.getItem('categoryDescriptions') || '{}');
            return customData[category + '_title'] || category.charAt(0).toUpperCase() + category.slice(1) + ' Photography';
        }

        function getCustomDescription(category) {
            const customData = JSON.parse(localStorage.getItem('categoryDescriptions') || '{}');
            const defaultDescriptions = {
                'portraits': 'Capturing authentic expressions',
                'events': 'Preserving special moments',
                'nature': 'Beauty of the natural world',
                'architecture': 'Contemporary architectural design'
            };
            return customData[category] || defaultDescriptions[category] || 'Professional photography';
        }

        function saveCustomTitle(category, title) {
            const customData = JSON.parse(localStorage.getItem('categoryDescriptions') || '{}');
            customData[category + '_title'] = title;
            localStorage.setItem('categoryDescriptions', JSON.stringify(customData));
        }

        function saveCustomDescription(category, description) {
            const customData = JSON.parse(localStorage.getItem('categoryDescriptions') || '{}');
            customData[category] = description;
            localStorage.setItem('categoryDescriptions', JSON.stringify(customData));
        }

        function createCategoryEditor(category) {
            const div = document.createElement('div');
            div.className = 'bg-light-blue rounded-lg p-6 border border-light-gray';
            
            div.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-slate-800">${category.charAt(0).toUpperCase() + category.slice(1)}</h3>
                    <span class="text-sm text-cool-gray">Category</span>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2 text-slate-700">Title</label>
                        <input 
                            type="text" 
                            class="w-full bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors"
                            value="${getCustomTitle(category)}"
                            data-category="${category}"
                            data-field="title"
                        >
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2 text-slate-700">Description</label>
                        <textarea 
                            class="w-full bg-white border border-light-gray rounded-lg px-4 py-2 text-slate-700 focus:outline-none focus:border-accent-blue transition-colors resize-none"
                            rows="3"
                            data-category="${category}"
                            data-field="description"
                        >${getCustomDescription(category)}</textarea>
                    </div>
                    
                    <div class="flex justify-end">
                        <button 
                            class="save-btn bg-accent-blue text-white px-4 py-2 rounded-lg hover:bg-hover-blue transition-colors text-sm font-medium"
                            data-category="${category}"
                        >
                            Save Changes
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners
            const titleInput = div.querySelector('input[data-field="title"]');
            const descriptionInput = div.querySelector('textarea[data-field="description"]');
            const saveBtn = div.querySelector('.save-btn');
            
            saveBtn.addEventListener('click', () => {
                const newTitle = titleInput.value.trim();
                const newDescription = descriptionInput.value.trim();
                
                if (newTitle) {
                    saveCustomTitle(category, newTitle);
                }
                if (newDescription) {
                    saveCustomDescription(category, newDescription);
                }
                
                showSuccessMessage(`Changes saved for ${category.charAt(0).toUpperCase() + category.slice(1)}!`);
            });
            
            return div;
        }

        function loadFeaturedWorkEditor() {
            const editor = document.getElementById('featured-work-editor');
            const noCategoriesMessage = document.getElementById('no-categories-message');
            const images = getStoredImages();
            
            // Clear existing content
            editor.innerHTML = '';
            
            if (images.length === 0) {
                noCategoriesMessage.classList.remove('hidden');
                editor.classList.add('hidden');
                return;
            }
            
            noCategoriesMessage.classList.add('hidden');
            editor.classList.remove('hidden');
            
            // Get unique categories
            const categories = [...new Set(images.map(img => img.category))];
            
            // Create editors for each category
            categories.forEach(category => {
                const categoryEditor = createCategoryEditor(category);
                editor.appendChild(categoryEditor);
            });
        }

        // Load featured work editor when page loads
        document.addEventListener('DOMContentLoaded', () => {
            updateCategoryDropdowns();
            loadImagesFromStorage();
            updateImageCount();
            loadFeaturedWorkEditor();
            loadCategoryList();
        });

        // Also load when the page becomes visible
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                updateCategoryDropdowns();
                loadImagesFromStorage();
                updateImageCount();
                loadFeaturedWorkEditor();
                loadCategoryList();
            }
        });

        // Data Management Functions
        function showStatusMessage(message, type = 'success') {
            const statusDiv = document.getElementById('data-status');
            const messageP = document.getElementById('status-message');
            
            statusDiv.className = `mt-6 p-4 rounded-lg border ${
                type === 'success' ? 'bg-green-50 border-green-200' : 
                type === 'error' ? 'bg-red-50 border-red-200' : 
                'bg-blue-50 border-blue-200'
            }`;
            
            messageP.className = `text-sm font-medium ${
                type === 'success' ? 'text-green-700' : 
                type === 'error' ? 'text-red-700' : 
                'text-blue-700'
            }`;
            
            messageP.textContent = message;
            statusDiv.classList.remove('hidden');
            
            setTimeout(() => {
                statusDiv.classList.add('hidden');
            }, 5000);
        }

        function exportAllData() {
            try {
                const data = {
                    images: JSON.parse(localStorage.getItem('adminImages') || '[]'),
                    categories: JSON.parse(localStorage.getItem('categoryDescriptions') || '{}'),
                    customCategories: JSON.parse(localStorage.getItem('customCategories') || '[]'),
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `subjectphoto-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showStatusMessage('Data exported successfully!', 'success');
            } catch (error) {
                showStatusMessage('Error exporting data: ' + error.message, 'error');
            }
        }

        function createBackup() {
            try {
                const backup = {
                    images: JSON.parse(localStorage.getItem('adminImages') || '[]'),
                    categories: JSON.parse(localStorage.getItem('categoryDescriptions') || '{}'),
                    customCategories: JSON.parse(localStorage.getItem('customCategories') || '[]'),
                    backupDate: new Date().toISOString(),
                    version: '1.0'
                };
                
                localStorage.setItem('subjectphotoBackup', JSON.stringify(backup));
                showStatusMessage('Backup created successfully!', 'success');
            } catch (error) {
                showStatusMessage('Error creating backup: ' + error.message, 'error');
            }
        }

        function importData(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Validate data structure
                    if (!data.images || !Array.isArray(data.images)) {
                        throw new Error('Invalid data format: missing images array');
                    }
                    
                    // Import data
                    localStorage.setItem('adminImages', JSON.stringify(data.images));
                    if (data.categories) {
                        localStorage.setItem('categoryDescriptions', JSON.stringify(data.categories));
                    }
                    if (data.customCategories) {
                        localStorage.setItem('customCategories', JSON.stringify(data.customCategories));
                    }
                    
                    showStatusMessage('Data imported successfully! Refreshing page...', 'success');
                    
                    // Refresh the page to show imported data
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                    
                } catch (error) {
                    showStatusMessage('Error importing data: ' + error.message, 'error');
                }
            };
            reader.readAsText(file);
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This action cannot be undone.')) {
                try {
                    localStorage.removeItem('adminImages');
                    localStorage.removeItem('categoryDescriptions');
                    localStorage.removeItem('customCategories');
                    localStorage.removeItem('subjectphotoBackup');
                    
                    showStatusMessage('All data cleared successfully! Refreshing page...', 'success');
                    
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                    
                } catch (error) {
                    showStatusMessage('Error clearing data: ' + error.message, 'error');
                }
            }
        }

        // Data Management Event Listeners
        document.getElementById('export-data').addEventListener('click', exportAllData);
        document.getElementById('backup-data').addEventListener('click', createBackup);
        document.getElementById('import-data').addEventListener('click', () => {
            document.getElementById('import-file').click();
        });
        document.getElementById('import-file').addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                importData(e.target.files[0]);
            }
        });
        document.getElementById('clear-all-data').addEventListener('click', clearAllData);

        // About Page Editor Functions
        function loadAboutPageData() {
            const aboutData = JSON.parse(localStorage.getItem('aboutPageData') || '{}');
            
            // Load photographer information
            document.getElementById('photographer-name').value = aboutData.photographerName || 'Alex Morgan';
            document.getElementById('photographer-location').value = aboutData.photographerLocation || 'San Francisco, CA';
            document.getElementById('photographer-image').value = aboutData.photographerImage || 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80';
            document.getElementById('photographer-bio').value = aboutData.photographerBio || 'Professional photographer with over 8 years of experience capturing life\'s most meaningful moments. Based in San Francisco, I specialize in creating timeless images that tell authentic stories.';
            document.getElementById('photographer-skills').value = aboutData.photographerSkills || 'Portrait Photography, Event Coverage, Nature Photography';
            
            // Load about sections
            document.getElementById('who-i-am').value = aboutData.whoIAm || 'I\'m a passionate photographer who believes every moment has a story worth telling. My journey began with a simple camera and an endless curiosity about the world around me. What started as a hobby quickly evolved into a deep passion for capturing the beauty, emotion, and authenticity in every frame.\n\nBorn and raised in California, I developed my artistic eye through years of exploring diverse landscapes and connecting with people from all walks of life. My work is heavily influenced by natural light, genuine emotions, and the unique character that each subject brings to the frame.';
            document.getElementById('why-i-shoot').value = aboutData.whyIShoot || 'Photography is more than just capturing imagesâ€”it\'s about freezing moments in time that would otherwise be lost forever. I believe every photograph should evoke emotion, tell a story, and preserve memories that will be cherished for generations.\n\nMy approach is rooted in authenticity. I don\'t just want to take your picture; I want to capture your essence, your personality, and the unique energy you bring to the world. Through my lens, I aim to create art that transcends the ordinary and transforms everyday moments into extraordinary memories.';
            
            // Load services
            document.getElementById('service-portraits').value = aboutData.servicePortraits || 'Professional headshots, family portraits, and personal branding photography that captures your authentic self.';
            document.getElementById('service-events').value = aboutData.serviceEvents || 'Weddings, corporate events, and special occasions documented with a blend of candid and posed photography.';
            document.getElementById('service-nature').value = aboutData.serviceNature || 'Fine art nature photography and landscape prints that showcase the raw beauty of our natural world.';
            
            // Load awards
            document.getElementById('award-1-year').value = aboutData.award1Year || '2023';
            document.getElementById('award-1-title').value = aboutData.award1Title || 'Best Portrait Photography';
            document.getElementById('award-1-organization').value = aboutData.award1Organization || 'San Francisco Photography Awards';
            
            document.getElementById('award-2-year').value = aboutData.award2Year || '2022';
            document.getElementById('award-2-title').value = aboutData.award2Title || 'Wedding Photographer of the Year';
            document.getElementById('award-2-organization').value = aboutData.award2Organization || 'California Wedding Association';
            
            document.getElementById('award-3-year').value = aboutData.award3Year || '2021';
            document.getElementById('award-3-title').value = aboutData.award3Title || 'Nature Photography Excellence';
            document.getElementById('award-3-organization').value = aboutData.award3Organization || 'National Geographic Local';
            
            // Load contact information
            document.getElementById('contact-email').value = aboutData.contactEmail || 'alex@subjectphoto.com';
            document.getElementById('cta-button-text').value = aboutData.ctaButtonText || 'Get In Touch';
            // Social links
            document.getElementById('social-instagram').value = aboutData.socialInstagram || '';
            document.getElementById('social-facebook').value = aboutData.socialFacebook || '';
            document.getElementById('social-twitter').value = aboutData.socialTwitter || '';
            document.getElementById('social-linkedin').value = aboutData.socialLinkedin || '';
            document.getElementById('social-website').value = aboutData.socialWebsite || '';
        }

        function saveAboutPageData() {
            const aboutData = {
                photographerName: document.getElementById('photographer-name').value,
                photographerLocation: document.getElementById('photographer-location').value,
                photographerImage: document.getElementById('photographer-image').value,
                photographerBio: document.getElementById('photographer-bio').value,
                photographerSkills: document.getElementById('photographer-skills').value,
                whoIAm: document.getElementById('who-i-am').value,
                whyIShoot: document.getElementById('why-i-shoot').value,
                servicePortraits: document.getElementById('service-portraits').value,
                serviceEvents: document.getElementById('service-events').value,
                serviceNature: document.getElementById('service-nature').value,
                award1Year: document.getElementById('award-1-year').value,
                award1Title: document.getElementById('award-1-title').value,
                award1Organization: document.getElementById('award-1-organization').value,
                award2Year: document.getElementById('award-2-year').value,
                award2Title: document.getElementById('award-2-title').value,
                award2Organization: document.getElementById('award-2-organization').value,
                award3Year: document.getElementById('award-3-year').value,
                award3Title: document.getElementById('award-3-title').value,
                award3Organization: document.getElementById('award-3-organization').value,
                contactEmail: document.getElementById('contact-email').value,
                ctaButtonText: document.getElementById('cta-button-text').value,
                // Social links
                socialInstagram: document.getElementById('social-instagram').value,
                socialFacebook: document.getElementById('social-facebook').value,
                socialTwitter: document.getElementById('social-twitter').value,
                socialLinkedin: document.getElementById('social-linkedin').value,
                socialWebsite: document.getElementById('social-website').value,
                lastUpdated: new Date().toISOString()
            };
            localStorage.setItem('aboutPageData', JSON.stringify(aboutData));
            showSuccessMessage('About page content saved successfully!');
        }

        // About Page Editor Event Listeners
        document.getElementById('about-page-form').addEventListener('submit', (e) => {
            e.preventDefault();
            saveAboutPageData();
        });

        // Load about page data when admin panel loads
        document.addEventListener('DOMContentLoaded', () => {
            updateCategoryDropdowns();
            loadImagesFromStorage();
            updateImageCount();
            loadFeaturedWorkEditor();
            loadCategoryList();
            loadAboutPageData(); // Load about page data
        });

        // Also load when the page becomes visible
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                updateCategoryDropdowns();
                loadImagesFromStorage();
                updateImageCount();
                loadFeaturedWorkEditor();
                loadCategoryList();
                loadAboutPageData(); // Load about page data
            }
        });

        // Add preview buttons next to each social link input
        const socialFields = [
          { id: 'social-instagram', label: 'Instagram', svg: '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zm4.25 2.25a5.25 5.25 0 1 1 0 10.5 5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5zm5.25 1.25a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>' },
          { id: 'social-facebook', label: 'Facebook', svg: '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22 12c0-5.522-4.477-10-10-10S2 6.478 2 12c0 4.991 3.657 9.128 8.438 9.877v-6.987h-2.54v-2.89h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.242 0-1.632.771-1.632 1.562v1.875h2.773l-.443 2.89h-2.33v6.987C18.343 21.128 22 16.991 22 12"/></svg>' },
          { id: 'social-twitter', label: 'Twitter', svg: '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 5.924c-.793.352-1.644.59-2.538.697a4.48 4.48 0 0 0 1.963-2.475 8.94 8.94 0 0 1-2.828 1.082A4.48 4.48 0 0 0 16.11 4c-2.48 0-4.49 2.01-4.49 4.49 0 .352.04.695.116 1.022C7.728 9.37 4.1 7.6 1.67 4.905c-.386.663-.607 1.434-.607 2.26 0 1.56.794 2.936 2.003 3.744a4.48 4.48 0 0 1-2.034-.563v.057c0 2.18 1.55 4.002 3.604 4.418-.377.103-.775.158-1.185.158-.29 0-.57-.028-.845-.08.57 1.78 2.22 3.08 4.18 3.12A8.98 8.98 0 0 1 2 19.54a12.68 12.68 0 0 0 6.88 2.02c8.26 0 12.78-6.84 12.78-12.78 0-.195-.004-.39-.013-.583A9.14 9.14 0 0 0 24 4.59a8.98 8.98 0 0 1-2.54.697z"/></svg>' },
          { id: 'social-linkedin', label: 'LinkedIn', svg: '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.76 0-5 2.24-5 5v14c0 2.76 2.24 5 5 5h14c2.76 0 5-2.24 5-5v-14c0-2.76-2.24-5-5-5zm-11 19h-3v-9h3v9zm-1.5-10.29c-.966 0-1.75-.79-1.75-1.75s.784-1.75 1.75-1.75 1.75.79 1.75 1.75-.784 1.75-1.75 1.75zm15.5 10.29h-3v-4.5c0-1.08-.02-2.47-1.5-2.47-1.5 0-1.73 1.17-1.73 2.39v4.58h-3v-9h2.89v1.23h.04c.4-.76 1.38-1.56 2.84-1.56 3.04 0 3.6 2 3.6 4.59v4.74z"/></svg>' },
          { id: 'social-website', label: 'Website', svg: '<svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 0 20M12 2a15.3 15.3 0 0 0 0 20"/></svg>' },
        ];
        socialFields.forEach(field => {
          const input = document.getElementById(field.id);
          if (!input) return;
          // Create preview button
          const btn = document.createElement('a');
          btn.className = 'ml-2 inline-flex items-center px-2 py-1 rounded hover:bg-light-blue focus:outline-none';
          btn.target = '_blank';
          btn.rel = 'noopener noreferrer';
          btn.title = 'Open ' + field.label;
          btn.innerHTML = field.svg;
          btn.style.display = input.value ? 'inline-flex' : 'none';
          input.parentNode.appendChild(btn);
          // Show/hide button on input
          input.addEventListener('input', () => {
            if (input.value) {
              btn.href = input.value;
              btn.style.display = 'inline-flex';
            } else {
              btn.style.display = 'none';
            }
          });
          // Set initial href
          if (input.value) btn.href = input.value;
        });

        // Booking Management System
        let bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
        let unavailableDates = JSON.parse(localStorage.getItem('unavailableDates') || '[]');
        let adminCurrentDate = new Date();
        let currentBookingFilter = 'all';

        // Load booking data
        function loadBookingData() {
            updateBookingStats();
            updateBookingsTable();
            updateUnavailableDatesList();
            initAdminCalendar();
        }

        // Update booking statistics
        function updateBookingStats() {
            const total = bookings.length;
            const confirmed = bookings.filter(b => b.status === 'confirmed').length;
            const pending = bookings.filter(b => b.status === 'pending').length;
            const cancelled = bookings.filter(b => b.status === 'cancelled').length;

            document.getElementById('total-bookings').textContent = total;
            document.getElementById('confirmed-bookings').textContent = confirmed;
            document.getElementById('pending-bookings').textContent = pending;
            document.getElementById('cancelled-bookings').textContent = cancelled;
        }

        // Update bookings table
        function updateBookingsTable() {
            const tableBody = document.getElementById('bookings-table-body');
            const noBookings = document.getElementById('no-bookings');
            
            let filteredBookings = bookings;
            if (currentBookingFilter !== 'all') {
                filteredBookings = bookings.filter(b => b.status === currentBookingFilter);
            }

            if (filteredBookings.length === 0) {
                tableBody.innerHTML = '';
                noBookings.classList.remove('hidden');
                return;
            }

            noBookings.classList.add('hidden');
            tableBody.innerHTML = '';

            filteredBookings.forEach(booking => {
                const row = document.createElement('tr');
                row.className = 'border-b border-light-gray hover:bg-light-blue/50';
                
                const statusColor = {
                    'confirmed': 'text-success-green',
                    'pending': 'text-warning-orange',
                    'cancelled': 'text-error-red'
                };

                row.innerHTML = `
                    <td class="p-4">
                        <div>
                            <div class="font-medium text-slate-800">${booking.name}</div>
                            <div class="text-sm text-cool-gray">${booking.email}</div>
                            ${booking.phone ? `<div class="text-sm text-cool-gray">${booking.phone}</div>` : ''}
                        </div>
                    </td>
                    <td class="p-4">
                        <span class="px-2 py-1 bg-light-blue text-cool-gray rounded text-xs font-medium">${booking.service}</span>
                    </td>
                    <td class="p-4">
                        <div>
                            <div class="font-medium text-slate-800">${new Date(booking.date).toLocaleDateString()}</div>
                            <div class="text-sm text-cool-gray">${booking.time}</div>
                        </div>
                    </td>
                    <td class="p-4">
                        <span class="px-2 py-1 rounded text-xs font-medium ${statusColor[booking.status]}">${booking.status}</span>
                    </td>
                    <td class="p-4">
                        <div class="flex space-x-2">
                            <button onclick="viewBookingDetails('${booking.id}')" class="text-accent-blue hover:text-hover-blue text-sm font-medium">View</button>
                            <button onclick="updateBookingStatus('${booking.id}', 'confirmed')" class="text-success-green hover:text-green-700 text-sm font-medium">Confirm</button>
                            <button onclick="updateBookingStatus('${booking.id}', 'cancelled')" class="text-error-red hover:text-red-700 text-sm font-medium">Cancel</button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // View booking details
        function viewBookingDetails(bookingId) {
            const booking = bookings.find(b => b.id === bookingId);
            if (!booking) return;

            const details = `
Client: ${booking.name}
Email: ${booking.email}
Phone: ${booking.phone || 'Not provided'}
Service: ${booking.service}
Date: ${new Date(booking.date).toLocaleDateString()}
Time: ${booking.time}
Duration: ${booking.duration} hour(s)
Status: ${booking.status}
Message: ${booking.message || 'No message'}
            `;
            
            alert(details);
        }

        // Update booking status
        function updateBookingStatus(bookingId, newStatus) {
            const bookingIndex = bookings.findIndex(b => b.id === bookingId);
            if (bookingIndex === -1) return;

            bookings[bookingIndex].status = newStatus;
            localStorage.setItem('bookings', JSON.stringify(bookings));
            
            updateBookingStats();
            updateBookingsTable();
            showSuccessMessage(`Booking ${newStatus} successfully!`);
        }

        // Update unavailable dates list
        function updateUnavailableDatesList() {
            const list = document.getElementById('unavailable-dates-list');
            list.innerHTML = '';

            if (unavailableDates.length === 0) {
                list.innerHTML = '<p class="text-sm text-cool-gray">No unavailable dates set</p>';
                return;
            }

            unavailableDates.forEach(date => {
                const dateElement = document.createElement('div');
                dateElement.className = 'flex justify-between items-center p-2 bg-light-gray rounded';
                dateElement.innerHTML = `
                    <span class="text-sm text-slate-700">${new Date(date).toLocaleDateString()}</span>
                    <button onclick="removeUnavailableDate('${date}')" class="text-error-red hover:text-red-700 text-sm">Remove</button>
                `;
                list.appendChild(dateElement);
            });
        }

        // Remove unavailable date
        function removeUnavailableDate(date) {
            unavailableDates = unavailableDates.filter(d => d !== date);
            localStorage.setItem('unavailableDates', JSON.stringify(unavailableDates));
            updateUnavailableDatesList();
            updateAdminCalendar();
        }

        // Initialize admin calendar
        function initAdminCalendar() {
            updateAdminCalendar();
            setupAdminCalendarNavigation();
        }

        // Update admin calendar
        function updateAdminCalendar() {
            const calendarGrid = document.getElementById('admin-calendar-grid');
            const currentMonthEl = document.getElementById('admin-current-month');
            
            calendarGrid.innerHTML = '';
            
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            currentMonthEl.textContent = `${monthNames[adminCurrentDate.getMonth()]} ${adminCurrentDate.getFullYear()}`;
            
            const firstDay = new Date(adminCurrentDate.getFullYear(), adminCurrentDate.getMonth(), 1);
            const lastDay = new Date(adminCurrentDate.getFullYear(), adminCurrentDate.getMonth() + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            daysOfWeek.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'text-center text-sm font-medium text-cool-gray py-2';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            for (let i = 0; i < 42; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                dayElement.className = 'text-center py-2 cursor-pointer rounded hover:bg-light-blue transition-colors';
                
                if (date.getMonth() === adminCurrentDate.getMonth()) {
                    dayElement.textContent = date.getDate();
                    
                    const dateStr = date.toISOString().split('T')[0];
                    const isBooked = bookings.some(booking => booking.date === dateStr);
                    const isUnavailable = unavailableDates.includes(dateStr);
                    const isPast = date < today;
                    
                    if (isPast) {
                        dayElement.className += ' text-soft-gray bg-light-gray';
                    } else if (isBooked) {
                        dayElement.className += ' text-white bg-error-red';
                        dayElement.title = 'Booked';
                    } else if (isUnavailable) {
                        dayElement.className += ' text-white bg-warning-orange';
                        dayElement.title = 'Unavailable';
                    } else {
                        dayElement.className += ' text-slate-800 bg-success-green';
                        dayElement.title = 'Available';
                    }
                } else {
                    dayElement.className += ' text-soft-gray';
                }
                
                calendarGrid.appendChild(dayElement);
            }
        }

        // Setup admin calendar navigation
        function setupAdminCalendarNavigation() {
            document.getElementById('admin-prev-month').onclick = () => {
                adminCurrentDate.setMonth(adminCurrentDate.getMonth() - 1);
                updateAdminCalendar();
            };
            
            document.getElementById('admin-next-month').onclick = () => {
                adminCurrentDate.setMonth(adminCurrentDate.getMonth() + 1);
                updateAdminCalendar();
            };
        }

        // Setup booking filter buttons
        document.querySelectorAll('.filter-booking-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-booking-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentBookingFilter = btn.dataset.filter;
                updateBookingsTable();
            });
        });

        // Mark date as unavailable
        document.getElementById('mark-unavailable').addEventListener('click', () => {
            const date = document.getElementById('unavailable-date').value;
            if (!date) {
                showErrorMessage('Please select a date');
                return;
            }
            
            if (unavailableDates.includes(date)) {
                showErrorMessage('Date is already marked as unavailable');
                return;
            }
            
            unavailableDates.push(date);
            localStorage.setItem('unavailableDates', JSON.stringify(unavailableDates));
            updateUnavailableDatesList();
            updateAdminCalendar();
            document.getElementById('unavailable-date').value = '';
            showSuccessMessage('Date marked as unavailable');
        });

        // Mark date as available
        document.getElementById('mark-available').addEventListener('click', () => {
            const date = document.getElementById('available-date').value;
            if (!date) {
                showErrorMessage('Please select a date');
                return;
            }
            
            if (!unavailableDates.includes(date)) {
                showErrorMessage('Date is not marked as unavailable');
                return;
            }
            
            unavailableDates = unavailableDates.filter(d => d !== date);
            localStorage.setItem('unavailableDates', JSON.stringify(unavailableDates));
            updateUnavailableDatesList();
            updateAdminCalendar();
            document.getElementById('available-date').value = '';
            showSuccessMessage('Date marked as available');
        });

        // Load booking data on page load
        document.addEventListener('DOMContentLoaded', loadBookingData);
    </script>

    <style>
        .filter-booking-btn {
            @apply px-4 py-2 rounded-lg border border-light-gray text-cool-gray hover:text-accent-blue hover:border-accent-blue transition-all duration-300 font-medium bg-white text-sm;
        }
        .filter-booking-btn.active {
            @apply bg-accent-blue text-white border-accent-blue;
        }
    </style>
</body>
</html> 